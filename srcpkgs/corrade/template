# Template file for 'corrade'
pkgname=corrade
version=2020.06.r2021.g4d462c1e
revision=1
build_style=cmake
configure_args="-DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr -DCORRADE_CPU_USE_IFUNC=OFF"
hostmakedepends="git"
short_desc="A multiplatform utility library written in C++11"
maintainer="Dora 'cat' <cat@thenight.club>"
license="MIT"
homepage="https://magnum.graphics/corrade/"
changelog="https://github.com/mosra/corrade/blob/master/doc/corrade-changelog.dox"

do_fetch(){
	git clone https://github.com/mosra/corrade/ "$wrksrc"
}

pre_configure(){
  actual_version=$(git describe --long | sed -r 's/([^-]*-g)/r\1/;s/-/./g;s/v//g')

  if [[ $actual_version != $version ]] then
      echo "Update version to $actual_version"
      exit 1
  fi
}

post_install() {
	vlicense COPYING LICENSE
}
