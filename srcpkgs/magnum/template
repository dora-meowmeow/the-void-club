# Template file for 'magnum'
pkgname=magnum
version=2020.06.r3516.g3a2c1292e
revision=1
build_style=cmake
configure_args="-DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_POLICY_VERSION_MINIMUM=3.5 -DMAGNUM_WITH_AUDIO=ON -DMAGNUM_WITH_GLXAPPLICATION=ON -DMAGNUM_WITH_GLFWAPPLICATION=ON -DMAGNUM_WITH_SDL2APPLICATION=ON -DMAGNUM_WITH_WINDOWLESSGLXAPPLICATION=ON -DMAGNUM_WITH_GLXCONTEXT=ON -DMAGNUM_WITH_OPENGLTESTER=ON -DMAGNUM_WITH_ANYAUDIOIMPORTER=ON -DMAGNUM_WITH_ANYIMAGECONVERTER=ON -DMAGNUM_WITH_ANYIMAGEIMPORTER=ON -DMAGNUM_WITH_ANYSCENECONVERTER=ON -DMAGNUM_WITH_ANYSCENEIMPORTER=ON -DMAGNUM_WITH_ANYSHADERCONVERTER=ON -DMAGNUM_WITH_MAGNUMFONT=ON -DMAGNUM_WITH_MAGNUMFONTCONVERTER=ON -DMAGNUM_WITH_OBJIMPORTER=ON -DMAGNUM_WITH_TGAIMAGECONVERTER=ON -DMAGNUM_WITH_TGAIMPORTER=ON -DMAGNUM_WITH_WAVAUDIOIMPORTER=ON -DMAGNUM_WITH_DISTANCEFIELDCONVERTER=ON -DMAGNUM_WITH_IMAGECONVERTER=ON -DMAGNUM_WITH_SCENECONVERTER=ON -DMAGNUM_WITH_SHADERCONVERTER=ON -DMAGNUM_WITH_FONTCONVERTER=ON -DMAGNUM_WITH_GL_INFO=ON -DMAGNUM_WITH_AL_INFO=ON -DMAGNUM_TARGET_VK=ON"
hostmakedepends="git corrade"
makedepends="corrade libGL vulkan-loader libopenal-devel glfw-devel SDL2-devel"
short_desc="Lightweight and modular C++11 graphics middleware library"
maintainer="Dora 'cat' <cat@thenight.club>"
license="MIT"
homepage="https://magnum.graphics/"
changelog="https://doc.magnum.graphics/magnum/changelog.html"

do_fetch(){
	git clone https://github.com/mosra/magnum/ "$wrksrc"
}

pre_configure(){
  actual_version=$(git describe --long | sed -r 's/([^-]*-g)/r\1/;s/-/./g;s/v//g')

  if [[ $actual_version != $version ]] then
      echo "Update version to $actual_version"
      exit 1
  fi
}

post_install() {
	vlicense COPYING LICENSE
}
