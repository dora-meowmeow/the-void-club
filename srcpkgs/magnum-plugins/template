# Template file for 'magnum-plugins'
pkgname=magnum-plugins
version=2020.06.r1698.g420a0e27
revision=1
build_style=cmake
configure_args="-DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_POLICY_VERSION_MINIMUM=3.5 -DMAGNUM_WITH_ASSIMPIMPORTER=OFF -DMAGNUM_WITH_ASTCIMPORTER=ON -DMAGNUM_WITH_BASISIMAGECONVERTER=OFF -DMAGNUM_WITH_BASISIMPORTER=OFF -DMAGNUM_WITH_BCDECIMAGECONVERTER=ON -DMAGNUM_WITH_CGLTFIMPORTER=ON -DMAGNUM_WITH_DDSIMPORTER=ON -DMAGNUM_WITH_DEVILIMAGEIMPORTER=ON -DMAGNUM_WITH_DRFLACAUDIOIMPORTER=ON -DMAGNUM_WITH_DRMP3AUDIOIMPORTER=ON -DMAGNUM_WITH_DRWAVAUDIOIMPORTER=ON -DMAGNUM_WITH_ETCDECIMAGECONVERTER=ON -DMAGNUM_WITH_FAAD2AUDIOIMPORTER=ON -DMAGNUM_WITH_FREETYPEFONT=ON -DMAGNUM_WITH_GLSLANGSHADERCONVERTER=ON -DMAGNUM_WITH_GLTFIMPORTER=ON -DMAGNUM_WITH_GLTFSCENECONVERTER=ON -DMAGNUM_WITH_ICOIMPORTER=ON -DMAGNUM_WITH_JPEGIMAGECONVERTER=ON -DMAGNUM_WITH_JPEGIMPORTER=ON -DMAGNUM_WITH_KTXIMAGECONVERTER=ON -DMAGNUM_WITH_KTXIMPORTER=ON -DMAGNUM_WITH_LUNASVGIMPORTER=OFF -DMAGNUM_WITH_MESHOPTIMIZERSCENECONVERTER=OFF -DMAGNUM_WITH_MINIEXRIMAGECONVERTER=ON -DMAGNUM_WITH_OPENEXRIMAGECONVERTER=ON -DMAGNUM_WITH_OPENEXRIMPORTER=ON -DMAGNUM_WITH_OPENGEXIMPORTER=ON -DMAGNUM_WITH_PLUTOSVGIMPORTER=OFF -DMAGNUM_WITH_PNGIMAGECONVERTER=ON -DMAGNUM_WITH_PNGIMPORTER=ON -DMAGNUM_WITH_PRIMITIVEIMPORTER=ON -DMAGNUM_WITH_RESVGIMPORTER=OFF -DMAGNUM_WITH_SPIRVTOOLSSHADERCONVERTER=ON -DMAGNUM_WITH_SPNGIMPORTER=OFF -DMAGNUM_WITH_STANFORDIMPORTER=ON -DMAGNUM_WITH_STANFORDSCENECONVERTER=ON -DMAGNUM_WITH_STBDXTIMAGECONVERTER=ON -DMAGNUM_WITH_STBIMAGECONVERTER=ON -DMAGNUM_WITH_STBIMAGEIMPORTER=ON -DMAGNUM_WITH_STBRESIZEIMAGECONVERTER=ON -DMAGNUM_WITH_STBTRUETYPEFONT=ON -DMAGNUM_WITH_STBVORBISAUDIOIMPORTER=ON -DMAGNUM_WITH_STLIMPORTER=ON -DMAGNUM_WITH_TINYGLTFIMPORTER=ON -DMAGNUM_WITH_UFBXIMPORTER=ON -DMAGNUM_WITH_WEBPIMAGECONVERTER=ON -DMAGNUM_WITH_WEBPIMPORTER=ON"
hostmakedepends="git corrade"
makedepends="corrade magnum devil-devel libjpeg-turbo-devel libpng-devel faad2-devel freetype-devel libopenexr-devel libwebp-devel glslang-devel SPIRV-Tools-devel libopenal-devel"
short_desc="Various plugins for the Magnum C++11 graphics engine"
maintainer="Dora 'cat' <cat@thenight.club>"
license="MIT"
homepage="https://magnum.graphics/"
changelog="https://doc.magnum.graphics/magnum/changelog-plugins.html"

do_fetch(){
	git clone https://github.com/mosra/magnum-plugins/ "$wrksrc"
}

pre_configure(){
  actual_version=$(git describe --long | sed -r 's/([^-]*-g)/r\1/;s/-/./g;s/v//g')

  if [[ $actual_version != $version ]] then
      echo "Update version to $actual_version"
      exit 1
  fi
}

post_install() {
	vlicense COPYING LICENSE
}
